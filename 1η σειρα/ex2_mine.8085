IN 10H

MAIN:
MVI D,FEH ;Helper to keep the state of leds
LXI B,11F4H ;Helper pair to declare the delay
MVI H,01H ;H is used in order to keep the ball running left when it needs to...

CHECK_STOP:
LDA 2000H
ANI 02H
CPI 02H
JZ CHECK_STOP

METHOD:
CALL DELB
LDA 2000H
CPI 00H  
JZ LEFT
MOV A,H
CPI 00H
JZ SECURITY_FOR_RIGHT_CORNER
JNZ SECURITY_FOR_LEFT_CORNER

SECURITY_FOR_RIGHT_CORNER:
MOV A,D 
CPI FEH
JNZ RIGHT
MVI H,01H
JMP LEFT

SECURITY_FOR_LEFT_CORNER:
MOV A,D
CPI 7FH
JNZ LEFT
MVI H,00H
JMP RIGHT

RIGHT:
MOV A,D
STA 3000H
RRC
MOV D,A
JMP CHECK_STOP

LEFT: 
MOV A,D
STA 3000H
RLC
MOV D,A
JMP CHECK_STOP


END